<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>Database</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Database"></a>Database</h1><div class=CBody><p>The abstract class used by SQL engines.</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Database" >Database</a></td><td class=SDescription>The abstract class used by SQL engines.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Database.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.connect" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">connect</a></td><td class=SDescription>Connects to the SQL database or server.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.close" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">close</a></td><td class=SDescription>Closes the connection to the SQL database or server.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.errno" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">errno</a></td><td class=SDescription>Returns the error number of which occurred from the last database method called, if any.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.error" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">error</a></td><td class=SDescription>Returns the error string from the last SELECT, UPDATE, INSERT, etc. </td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.escape" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">escape</a></td><td class=SDescription>Makes a string safe to use in a query.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.unescape" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">unescape</a></td><td class=SDescription>The opposite of the escape method.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.version" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">version</a></td><td class=SDescription>Returns a string containing the databases version (Like MySQL 5.0.11).</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.tables" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">tables</a></td><td class=SDescription>Returns an array containing all the tables in the database.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.query" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">query</a></td><td class=SDescription>Queries the database, however, it isn&rsquo;t a simple [mysql|sqlite|...]_query as this method changes the query for any compatibility issues. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.var_sanitize" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">var_sanitize</a></td><td class=SDescription>Sanitizes the variable in a query using the correct methods.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.var_sanitize" >var_sanitize</a></td><td class=SDescription>All the following methods are helper methods of var_sanitize. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.insert" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">insert</a></td><td class=SDescription>Inserts or replaces data in the database. </td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Database.log_error" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">log_error</a></td><td class=SDescription>Logs a database error into the SnowCMS error log, if the error is fatal, show a plain ol&rsquo; ugly error page stating an error occurred.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Database.log_error" >log_error</a></td><td class=SDescription>The destructor writes all the debugging text to a file, if any, upon this object being destructed.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Database.Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.connect"></a>connect</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function connect()</td></tr></table></blockquote><p>Connects to the SQL database or server.</p><h4 class=CHeading>Parameters</h4><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>bool</td><td class=CDLDescription>Returns TRUE if the connection was a success, FALSE if connection failed.</td></tr></table><p>NOTE: To get the database information, simply global the variables, such as $db_host, $db_name, $db_user, $db_passwd, $db_prefix, etc.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.close"></a>close</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function close()</td></tr></table></blockquote><p>Closes the connection to the SQL database or server.</p><h4 class=CHeading>Parameters</h4><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>bool</td><td class=CDLDescription>Returns TRUE if the connection was successfully closed, FALSE otherwise.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.errno"></a>errno</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function errno()</td></tr></table></blockquote><p>Returns the error number of which occurred from the last database method called, if any.</p><h4 class=CHeading>Parameters</h4><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>int</td><td class=CDLDescription>Returns the last error number, 0 if none.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.error"></a>error</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function error()</td></tr></table></blockquote><p>Returns the error string from the last SELECT, UPDATE, INSERT, etc. query.</p><h4 class=CHeading>Parameters</h4><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string</td><td class=CDLDescription>Returns the last error string, an empty string if no errors occurred.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.escape"></a>escape</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function escape(</td><td class=PParameter nowrap>$str,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$htmlspecialchars</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> false</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Makes a string safe to use in a query.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string $str</td><td class=CDLDescription>The string that needs sanitizing.</td></tr><tr><td class=CDLEntry>bool $htmlspecialchars</td><td class=CDLDescription>Whether or not to first do htmlspecialchars on the string.</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string</td><td class=CDLDescription>Returns the sanitized string.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.unescape"></a>unescape</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function unescape(</td><td class=PParameter nowrap>$str,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$htmlspecialchars_decode</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> false</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>The opposite of the escape method.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string $str</td><td class=CDLDescription>The string to unescape.</td></tr><tr><td class=CDLEntry>bool $htmlspecialchars_decode</td><td class=CDLDescription>Whether or not to undo htmlspecialchars after unescaping.</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string</td><td class=CDLDescription>Returns the unescaped string.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.version"></a>version</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function version()</td></tr></table></blockquote><p>Returns a string containing the databases version (Like MySQL 5.0.11).</p><h4 class=CHeading>Parameters</h4><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string</td><td class=CDLDescription>Returns the version of the databases version number.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.tables"></a>tables</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function tables()</td></tr></table></blockquote><p>Returns an array containing all the tables in the database.</p><h4 class=CHeading>Parameters</h4><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>array</td><td class=CDLDescription>Returns an array containing all the tables in the database.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.query"></a>query</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function query(</td><td class=PParameter nowrap>$db_query,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$db_vars</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> array(),</td></tr><tr><td></td><td class=PParameter nowrap>$hook_name</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$db_compat</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$file</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$line</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> 0</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Queries the database, however, it isn&rsquo;t a simple [mysql|sqlite|...]_query as this method changes the query for any compatibility issues.&nbsp; ONLY SELECT, UPDATE and DELETE queries should be used with this method, check out the insert method for doing INSERT&rsquo;s and REPLACE&rsquo;s</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string $db_query</td><td class=CDLDescription>The database query you want to execute.</td></tr><tr><td class=CDLEntry>array $db_vars</td><td class=CDLDescription>The variable values to replace in the query.</td></tr><tr><td class=CDLEntry>string $hook_name</td><td class=CDLDescription>The name of hook to run BEFORE anything else is done.&nbsp; The run_hook method is to have $db_query, $db_vars and $db_compat passed as parameters.</td></tr><tr><td class=CDLEntry>string $db_compat</td><td class=CDLDescription>A string which can be null or a string giving the database class a heads up on any possible compatibility issues.</td></tr><tr><td class=CDLEntry>string $file</td><td class=CDLDescription>The file query was called on, LEAVE THIS BLANK!&nbsp; This is for use by the insert method!</td></tr><tr><td class=CDLEntry>int $line</td><td class=CDLDescription>The line the query was called on, LEAVE THIS BLANK!&nbsp; This is for use by the insert method as well!</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>{Database_Result}</td><td class=CDLDescription>Returns an object with methods such as fetch_assoc, num_rows, etc.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.var_sanitize"></a>var_sanitize</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract protected function var_sanitize(</td><td class=PParameter nowrap>$var_name,</td></tr><tr><td></td><td class=PParameter nowrap>$datatype,</td></tr><tr><td></td><td class=PParameter nowrap>$value,</td></tr><tr><td></td><td class=PParameter nowrap>$file,</td></tr><tr><td></td><td class=PParameter nowrap>$line</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Sanitizes the variable in a query using the correct methods.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string $var_name</td><td class=CDLDescription>The name of the variable in the query.</td></tr><tr><td class=CDLEntry>string $datatype</td><td class=CDLDescription>The datatype of the variable.</td></tr><tr><td class=CDLEntry>mixed $value</td><td class=CDLDescription>Contains the value of the variable.</td></tr><tr><td class=CDLEntry>string $file</td><td class=CDLDescription>The file that query/insert was called in.</td></tr><tr><td class=CDLEntry>int $line</td><td class=CDLDescription>The line that query/insert was called on.</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>mixed</td><td class=CDLDescription>Returns the correctly sanitized value.</td></tr></table><h4 class=CHeading>NOTE: SnowCMS currently supports the following datatypes</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>float</td><td class=CDLDescription>a number such as 1, 1.0, etc.</td></tr><tr><td class=CDLEntry>float_array</td><td class=CDLDescription>an array containing floats, when all numbers inside are properly sanitized, implode with a comma.</td></tr><tr><td class=CDLEntry>int</td><td class=CDLDescription>a integer.</td></tr><tr><td class=CDLEntry>int_array</td><td class=CDLDescription>an array containing integers, implode using commas.</td></tr><tr><td class=CDLEntry>raw</td><td class=CDLDescription>a string which will be put into the query, with nothing done to it.</td></tr><tr><td class=CDLEntry>string</td><td class=CDLDescription>a string.</td></tr><tr><td class=CDLEntry>string_array</td><td class=CDLDescription>an array containing strings, implode using commas.</td></tr><tr><td class=CDLEntry>text</td><td class=CDLDescription>an alias of string.</td></tr><tr><td class=CDLEntry>text_array</td><td class=CDLDescription>an alias of string_array.</td></tr></table><p>More information about databasing can be found at <a href="http://code.google.com/p/snowcms/wiki/Databasing" class=LURL target=_top>http://code.google.com/p/snowcms/wiki/Databasing</a></p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.var_sanitize"></a>var_sanitize</h3><div class=CBody><p>All the following methods are helper methods of var_sanitize.&nbsp; They all get passed the variable name, value, file name and line number.&nbsp; These helper methods are expected to properly sanitize the value according to the variables datatype.&nbsp; If the value given is not able to be sanitized properly, you must call on the database method log_error fatally.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.insert"></a>insert</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function insert(</td><td class=PParameter nowrap>$type,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$tbl_name,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$columns,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$data,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$keys</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> array(),</td></tr><tr><td></td><td class=PParameter nowrap>$hook_name</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Inserts or replaces data in the database.&nbsp; You can insert/replace multiple rows by having arrays inside the data array.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string $type</td><td class=CDLDescription>The type of insert you want to perform, INSERT, IGNORE or REPLACE supported.</td></tr><tr><td class=CDLEntry>string $tbl_name</td><td class=CDLDescription>The table name that the data will be inserted into.</td></tr><tr><td class=CDLEntry>array $columns</td><td class=CDLDescription>An array containg the columns that will have data inserted into.</td></tr><tr><td class=CDLEntry>array $data</td><td class=CDLDescription>The actual data to be inserted.</td></tr><tr><td class=CDLEntry>array $keys</td><td class=CDLDescription>Some database types (Like PostgreSQL) do not support REPLACE, in order to fix that you must supply the column names which are the primary/unique keys that way an UPDATE query can be attempted, if that fails, the data is inserted.</td></tr><tr><td class=CDLEntry>string $hook_name</td><td class=CDLDescription>The hook to run (using run_hook in $api) BEFORE the anything is done, run_hook is to pass $type, $tbl_name, $columns, $data and $keys as parameters.</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>{Database_Result}</td><td class=CDLDescription>An object containing methods such as affected_rows(), etc.</td></tr></table><p>More information about databasing can be found at <a href="http://code.google.com/p/snowcms/wiki/Databasing" class=LURL target=_top>http://code.google.com/p/snowcms/wiki/Databasing</a></p><p>NOTE: It is recommended for running the query through the database that you use the query method, simply pass the method the file and line the insert method was called on to query, also, set the db_compat parameter in query to insert, return query&rsquo;s result.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.log_error"></a>log_error</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function log_error(</td><td class=PParameter nowrap>$error_message,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$is_fatal</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> false,</td></tr><tr><td></td><td class=PParameter nowrap>$file</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$line</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> 0</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Logs a database error into the SnowCMS error log, if the error is fatal, show a plain ol&rsquo; ugly error page stating an error occurred.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string $error_message</td><td class=CDLDescription>The error message to log.</td></tr><tr><td class=CDLEntry>bool $is_fatal</td><td class=CDLDescription>Whether or not the error that occurred means that SnowCMS can no longer continue running.</td></tr><tr><td class=CDLEntry>string $file</td><td class=CDLDescription>The file that the method was called in that created the error.</td></tr><tr><td class=CDLEntry>int $line</td><td class=CDLDescription>The line that the method was called on that created the error.</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>void</td><td class=CDLDescription>Nothing is returned by this method.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Database.log_error"></a>log_error</h3><div class=CBody><p>The destructor writes all the debugging text to a file, if any, upon this object being destructed.</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="api-class-php.html">API</a></div></div><div class=MEntry><div class=MFile id=MSelected>Database</div></div><div class=MEntry><div class=MFile><a href="database_maintenance-class-php.html">Database_Maintenance</a></div></div><div class=MEntry><div class=MFile><a href="member-class-php.html">Member</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Functions.html">Functions</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Functions">Functions</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function connect()</td></tr></table></blockquote>Connects to the SQL database or server.</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function close()</td></tr></table></blockquote>Closes the connection to the SQL database or server.</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function errno()</td></tr></table></blockquote>Returns the error number of which occurred from the last database method called, if any.</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function error()</td></tr></table></blockquote>Returns the error string from the last SELECT, UPDATE, INSERT, etc. </div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function escape(</td><td class=PParameter nowrap>$str,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$htmlspecialchars</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> false</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Makes a string safe to use in a query.</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function unescape(</td><td class=PParameter nowrap>$str,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$htmlspecialchars_decode</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> false</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>The opposite of the escape method.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function version()</td></tr></table></blockquote>Returns a string containing the databases version (Like MySQL 5.0.11).</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>abstract public function tables()</td></tr></table></blockquote>Returns an array containing all the tables in the database.</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function query(</td><td class=PParameter nowrap>$db_query,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$db_vars</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> array(),</td></tr><tr><td></td><td class=PParameter nowrap>$hook_name</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$db_compat</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$file</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$line</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> 0</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Queries the database, however, it isn&rsquo;t a simple [mysql|sqlite|...]_query as this method changes the query for any compatibility issues. </div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract protected function var_sanitize(</td><td class=PParameter nowrap>$var_name,</td></tr><tr><td></td><td class=PParameter nowrap>$datatype,</td></tr><tr><td></td><td class=PParameter nowrap>$value,</td></tr><tr><td></td><td class=PParameter nowrap>$file,</td></tr><tr><td></td><td class=PParameter nowrap>$line</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Sanitizes the variable in a query using the correct methods.</div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>abstract public function insert(</td><td class=PParameter nowrap>$type,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$tbl_name,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$columns,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$data,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$keys</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> array(),</td></tr><tr><td></td><td class=PParameter nowrap>$hook_name</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Inserts or replaces data in the database. </div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function log_error(</td><td class=PParameter nowrap>$error_message,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$is_fatal</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> false,</td></tr><tr><td></td><td class=PParameter nowrap>$file</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> null,</td></tr><tr><td></td><td class=PParameter nowrap>$line</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%> 0</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Logs a database error into the SnowCMS error log, if the error is fatal, show a plain ol&rsquo; ugly error page stating an error occurred.</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>